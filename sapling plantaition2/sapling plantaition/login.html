<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="login.css">
</head>
<body>
    <div class="card">
        <h1>User Login</h1>
        <div class="user">

            <label for="username">username:</label>
            <input type="text" id="username" placeholder="username" >
        </div>
        <div class="user">

            <label for="password">password:</label>
            <input type="text" id="password" placeholder="password" >
        </div>
        <button id="sign-up">Sign up</button>
        <a href="#">Sign up as admin</a>
    </div>
</body>
<script src="C:\Users\adity\Desktop\Project_SOH\JS\jQuery.js"></script>
<script type=module>
    
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-app.js";
        
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optionaly
const firebaseConfig = {
  apiKey: "AIzaSyCGaXPLVwk8ZNCwHJ__BLQVi0jBHzLPC3E",
  authDomain: "trial-01-first.firebaseapp.com",
  databaseURL: "https://trial-01-first-default-rtdb.firebaseio.com",
  projectId: "trial-01-first",
  storageBucket: "trial-01-first.appspot.com",
  messagingSenderId: "205467838994",
  appId: "1:205467838994:web:faa81fd19858db4e6a46cb",
  measurementId: "G-EV6KWHQ61G"
};

// Initialize Firebase
const firebase = initializeApp(firebaseConfig);

import {getDatabase, set, get, update, remove, ref, child}
from "https://www.gstatic.com/firebasejs/9.14.0/firebase-database.js"

const db = getDatabase();


var enterID = document.querySelector("#username");
var enterPass = document.querySelector("#password");

var findBtn = document.querySelector("#sign-up");

var keys = [];
var cl_data;

var td1 ;
function FindData() {
    const dbref = ref(db);
    get(child(dbref, "careTaker/id/"+username.value+"/pass"))
    .then((snapshot)=>{
        if(snapshot.exists()){
            cl_data = snapshot.val();
        
            if(cl_data==enterPass.value){
                localStorage.setItem("ID",username.value);
                localStorage.setItem("bq", "yes");
                window.location.href='sapling_pjt.html';
            }
            
        } else {
            alert("No data found"); 
        }

    })
    .catch((error)=>{
        alert(error)
    })
}
findBtn.addEventListener('click', FindData);
</script>
</html>